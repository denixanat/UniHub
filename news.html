<!doctype html>
<html lang="en">
    <head>
        <title>CityU News</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        
        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
        />
    <!-- Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    </head>

    <body>
        <header>
            <!-- Navbar -->
            <nav
                class="navbar navbar-dark"
                style="background-color: rgba(4, 29, 58, 0.985); height: 10vh;"
            >
            <div class="container">
                <a
                class="navbar-brand"
                style="color: rgb(255, 255, 255); font-weight: bold; font-size: 1.5rem;" 
                href="index.html"
            >
            <svg xmlns="http://www.w3.org/2000/svg" style="margin-right: 10px;" width="25" height="30" fill="white" class="bi bi-book" viewBox="0 1 16 16">
              <path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"/>
            </svg>
                The University News Hub
            </a>
            </div>
            </nav>
            <nav class="navbar navbar-expand-lg" 
            style="background-color: rgb(31, 183, 194); padding: 10px auto;">
           <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
               <span class="navbar-toggler-icon"></span>
           </button>
         
           <div class="collapse navbar-collapse" id="navbarSupportedContent">
               <ul class="navbar-nav mx-auto"> <!-- Centers the nav links -->
                   <!-- Add data-university attributes to your news links to track the university selection -->
               <!-- Add data-university attributes to your news links to track the university selection -->
               <li class="nav-item active">
                <a
                    class="btn btn-link text-white text-decoration-none"
                    href="news.html?university=UASLP"
                    style="font-weight: bold;"
                >
                    UASLP News
                </a>                
            </li>
            <li class="nav-item active">
                <a
                    class="btn btn-link text-white text-decoration-none"
                    href="news.html?university=CityU"
                    style="font-weight: bold;"
                >
                    CityU News
                </a>                
            </li>
                   <li class="nav-item dropdown" style="
                   --bs-nav-link-padding-y: 0.375rem;
                   --bs-nav-link-padding-x: 0.75rem;
               ">
                   <a class="nav-link dropdown-toggle text-white text-decoration-none" style="font-weight: bold;" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                       Filter
                   </a>
                   <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                       <h6 class="dropdown-header">Categories</h6>
                       <div class="dropdown-item">
                           <input type="checkbox" id="directives" name="filter" value="Directives">
                           <label for="directives">Directives</label>
                       </div>
                       <div class="dropdown-item">
                           <input type="checkbox" id="sports" name="filter" value="Sports">
                           <label for="sports">Sports</label>
                       </div>
                       <div class="dropdown-item">
                        <input type="checkbox" id="research" name="filter" value="Research">
                        <label for="sports">Research</label>
                    </div>
                       <!-- Add more checkboxes as needed -->
                   </div>
               </li>
               
                    <!-- HTML structure for search -->
                    <form class="form-inline my-2 my-lg-0">
                        <div class="d-flex" style="padding: 0rem 1rem 0rem 0.75rem;">
                            <input class="form-control me-2" type="search" id="search-bar" placeholder="Search" aria-label="Search">
                        </div>                                    
                    </form>

                   </li>
                   <li>
                    <button class="btn btn-light ms-2" type="button" aria-label="Translate" onclick="translatePage()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-translate" viewBox="0 0 16 16">
                            <path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286zm1.634-.736L5.5 3.956h-.049l-.679 2.022z"/>
                            <path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm7.138 9.995q.289.451.63.846c-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6 6 0 0 1-.415-.492 2 2 0 0 1-.94.31"/>
                        </svg>
                    </button>
                   </li>
               </ul>
               
           </div>
       </nav>
       
        </header>

        <!-- Separator Bar -->
        <div style="height: 12px; background-color: rgb(5, 125, 141); width: 100%;"></div>

        <main>
            <!-- News Cards Section -->
            <div class="container my-5">
                <div class="container mt-5">
                    <div class="row" id="news-cards-container">
                        <!-- News cards will be dynamically inserted here -->
                    </div>
                </div>
                 
            </div>
        </main>

        <div style="height: 12px; background-color: rgb(5, 125, 141); width: 100%;"></div>

        <footer style="background-color: rgba(4, 29, 58, 0.985); color: white; padding: 2rem 0;">
            <div class="container text-center">
                <p>&copy; 2024 The University News Hub</p>
                <div class="mt-3">
                    <a href="#top" class="btn btn-light">Back to Top</a>
                </div>
            </div>
        </footer>



        <script src="newsData.js"></script>
        <script>
document.addEventListener("DOMContentLoaded", () => {
    const container = document.getElementById("news-cards-container");
    const filters = document.querySelectorAll('input[name="filter"]');
    const searchInput = document.getElementById("search-bar"); // Your search input field

    // Function to get the university from the URL
    function getUniversityFromURL() {
        const params = new URLSearchParams(window.location.search);
        return params.get('university') || '';  // Default to '' if no university is set
    }

    // Function to get the search query from URL
    function getSearchQueryFromURL() {
        const params = new URLSearchParams(window.location.search);
        return params.get('search') || '';  // Default to '' if no search query is set
    }

    // Function to update news cards based on selected filters and search query
    function updateNewsCards() {
        const selectedUniversity = getUniversityFromURL();
        const selectedFilters = Array.from(filters)
            .filter(input => input.checked)
            .map(input => input.value);

        // Get the search query from input field or URL (prioritize input field over URL)
        const searchQuery = searchInput.value.toLowerCase() || getSearchQueryFromURL().toLowerCase();

        // Filter news based on selected filters, university, and search query
        const filteredNews = newsData.filter(news => {
            const matchesFilter = selectedFilters.length === 0 || selectedFilters.some(filter => news.tags.includes(filter));
            const matchesUniversity = selectedUniversity === '' || news.university === selectedUniversity;
            const matchesSearchQuery = searchQuery === '' || news.title.toLowerCase().includes(searchQuery);  // Check if title contains search query

            return matchesFilter && matchesUniversity && matchesSearchQuery;
        });

        // Clear existing cards
        container.innerHTML = '';

        // Generate cards for filtered news
        filteredNews.forEach(news => {
            const card = document.createElement('div');
            card.classList.add('col-md-4', 'mb-4');
            card.innerHTML = `
                <div class="card">
                    <a href="article.html?id=${news.id}" style="text-decoration:none; color: inherit">
                        <img src="${news.image || 'default-image.jpg'}" class="card-img-top" alt="Card image">
                        <div class="card-body">
                            <h5 class="card-title" style="color: rgba(4, 29, 58, 0.985);">${news.title}</h5>
                            <p class="card-text">${news.description}</p>
                            <p class="card-text" style="color: rgba(4, 29, 58, 0.985);">${news.tags}</p>
                            <p class="text-muted">By ${news.author} | ${news.date}</p>
                        </div>
                    </a>
                </div>
            `;
            container.appendChild(card);
        });
    }

    // Add event listeners to the checkboxes for filters
    filters.forEach(filter => {
        filter.addEventListener('change', updateNewsCards);
    });

    // Add event listener to the search input for real-time search
    searchInput.addEventListener('input', updateNewsCards);

    // Initially show all news cards based on URL parameters (including search query)
    updateNewsCards();
});


        </script>

        <!-- Bootstrap JavaScript Libraries -->
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-cuEZXMt92/yjJpc2kqJNkJc0F0S7vW9EdclK5ZzfuK5IuMaqz1GJXjxE8kcSgBxO" crossorigin="anonymous"></script>
        <script>
            
            // Aquí iría tu clave API de Google Translate
            const apiKey = 'AIzaSyAH13op3-X7Cr-zZlhzaUYcKAJID07Up2M'; // Reemplaza esto con tu clave de API real.
            let currentLang = 'en'; // Idioma inicial

            function translatePage() {
                const targetLang = currentLang === 'en' ? 'es' : 'en'; // Cambia el idioma
                const textElements = document.querySelectorAll('h5, p');

                textElements.forEach(element => {
                    const text = element.innerText || element.textContent;
                    if (text) {
                        translateText(text, targetLang, function(translatedText) {
                            element.innerText = translatedText;
                        });
                    }
                });

                // Cambia el estado del idioma
                currentLang = targetLang;
            }

            // Función para traducir un texto usando Google Translate API
            function translateText(text, targetLang, callback) {
                const url = `https://translation.googleapis.com/language/translate/v2?key=${apiKey}`;
                const data = {
                    q: text,
                    target: targetLang
                };

                fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                .then(response => response.json())
                .then(data => {
                    if (data && data.data && data.data.translations) {
                        callback(data.data.translations[0].translatedText);
                    }
                })
                .catch(error => console.error('Error in translation:', error));
            }
        </script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
